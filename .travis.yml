language: ruby
addons:
  postgresql: '9.3'
rvm:
- 2.1.1
before_script:
- cp config/database.yml.travis config/database.yml
- psql -c 'create database qapi_test;' -U postgres
- rake db:setup
script: bundle exec rake
env:
  global:
  - secure: OqKd3CMsK6MhCsccWqUehDJxE8y0LAPWQyzu/F523HDAYYG7wVAtwwkfsL71f6M3YmZtZhJswg0zFYaWh2SQMPnqRDLChIj+kavqxpKiHE9q88ZJsTuy09qu7QLJP/icBPzUbas3JOBQ9nOQwix0+ohFrzKxVUSmRKn+bdRSQao=
  - secure: pdwcjrOCpxHRuCi1itx1GtIY8RjmZxr3ZErTg1sii95lxFsYmwoGh01R6ROvHT0f5lbyKVFbbVMx8HgVAj+FQ4CRYSywPVb/kCLYEPy6CieyJb656sw6OzwBzvpXoiFV9ISKBJT7Me/B2saoC74obldwPlzUsi0VEe8VSTafzr4=
  - secure: gk0t5uskt+Sydg+BqAlmgOVs0WzoNFT/ohKZBsWXjgjrl3acEz4PlSYoYpbEr3h6JHqk0r4Rp4lHGLD+ZcG/WFF3FOXkhaAEdpmCs1FMY4eLtaIKhoriRrsye5vnoKVhkDkBLrzP/9GMOy23ctN7Y+exEPpBAthhWU4fZCjes4s=
  - secure: mM7aUMV4R5YXjM07gCDsvXX6WFRbHmk7Gz4P88ayPtwHKaBIoRfi3yQwg5DkPKg1tnCIBgHICpUNTKWrk8ShvSyUhpBHsz1N5HBXsXUN1v66vuGs5APY+SjHK5EIH2xvKNfIZdbSHD3SXYSI9S85TkUZ7N1h4gzCVKDWwsTQaZg=
deploy:
  provider: heroku
  api_key:
    secure: atRxuL4Qls6E1PG+gZwTFZkcfBje/d4eLYZ1UmZc8Z0YkdyqeDSx4kF3syNGq9V8TlAzr6JFvxXizD1Axd4t7PhoQUwaYppXJxYUCgd6iH/iLu/PiY+EB1cE3St7OQ8XvToDdxNkDfYqsDPuTy1enU2FNL8mKsiF2JF+7kPmiN0=
  app: qapi
  on:
    repo: secretBears/QAPI
